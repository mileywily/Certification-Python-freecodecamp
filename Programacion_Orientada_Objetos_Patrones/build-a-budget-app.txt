** start of main.py **

class Category:

    def __init__(self,name):
      self.name =name
      self.ledger = []

    def deposit(self,amount,description=''):
        self.ledger.append({"amount": amount, "description": description})

    def withdraw(self,amount,description=''):
        if self.check_funds(amount):
         self.ledger.append({"amount":- amount, "description": description})
         return True
        else:
         return False

    def get_balance(self):
        total=0
        for item in self.ledger:
            total= total + item['amount']
        return total

    def check_funds(self,amount):
        if amount > self.get_balance():
            return False
        return True
    
    def transfer(self, amount, category_instance):
        """
        Transfiere fondos de esta categoría a otra.
        Usa check_funds para validar la operación.
        """
        # Primero validamos si hay fondos suficientes en la categoría de origen
        if self.check_funds(amount):
            # 1. Retiro de la categoría actual (Source)
            self.withdraw(amount, f"Transfer to {category_instance.name}")
            
            # 2. Depósito en la categoría de destino (Destination)
            category_instance.deposit(amount, f"Transfer from {self.name}")
            
            return True
        
        # Si no hay fondos, no se realiza ninguna operación
        return False

    def __str__(self):
            # 1. Título centrado con asteriscos (30 caracteres en total)
            title = f"{self.name:*^30}\n"
            
            # 2. Lista de transacciones
            items = ""
            for item in self.ledger:
                # Descripción: primeros 23 caracteres
                desc = f"{item['description'][:23]:<23}"
                # Monto: 7 caracteres, con 2 decimales, alineado a la derecha
                amount = f"{item['amount']:>7.2f}"
                items += f"{desc}{amount}\n"
            
            # 3. Total final
            total = f"Total: {self.get_balance():.2f}"
            
            return title + items + total

def create_spend_chart(categories):
    # 1. Calcular gastos totales por categoría (solo withdraws)
    spent_amounts = []
    for category in categories:
        spent = sum(item['amount'] for item in category.ledger if item['amount'] < 0)
        spent_amounts.append(abs(spent))
    
    total_spent = sum(spent_amounts)
    
    # Calcular porcentajes redondeados hacia abajo al múltiplo de 10
    # Ejemplo: 36% -> 30%
    percentages = [int((amount / total_spent) * 100 // 10) * 10 for amount in spent_amounts]

    # 2. Construir la parte superior del gráfico (Eje Y y Barras)
    chart = "Percentage spent by category\n"
    for i in range(100, -1, -10):
        chart += f"{str(i).rjust(3)}| "
        for percent in percentages:
            chart += "o  " if percent >= i else "   "
        chart += "\n"

    # 3. Línea horizontal
    chart += "    " + "-" * (len(categories) * 3 + 1) + "\n"

    # 4. Nombres de categorías verticales
    names = [category.name for category in categories]
    max_length = max(len(name) for name in names)
    
    for i in range(max_length):
        chart += "     "
        for name in names:
            if i < len(name):
                chart += f"{name[i]}  "
            else:
                chart += "   "
        if i < max_length - 1:
            chart += "\n"

    return chart

food = Category('Food')
food.deposit(1000, 'deposit')
food.withdraw(10.15, 'groceries')
food.withdraw(15.89, 'restaurant and more food for dessert')
clothing = Category('Clothing')
food.transfer(50, clothing)
#print(food)


** end of main.py **

